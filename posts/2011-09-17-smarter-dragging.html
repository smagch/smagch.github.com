<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="description" content="about smagch"><meta name="viewport" content="width=device-width"><meta name="author" content="smagch"><meta name="keywords" content="Node.js,javascript"><link rel="stylesheet" href="/stylesheets/home.css"><script src="/javascripts/modernizr.min.js"></script><title>smarter dragging</title></head><body><div id="wrapper"><header id="main-header"><h1><a href="/">smagch.github.com</a></h1></header><div id="container"><nav><ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="https://twitter.com/smagch">twitter</a></li><li><a href="https://github.com/smagch">github</a></li></ul><ul><li><a href="/posts/2012-11-17-blog-redesign.html">next</a></li><li><a href="/posts/2011-09-15-css3-transform.html">prev</a></li></ul></nav><div id="content"><article><header class="clearfix"><h1><a href="/posts/2011-09-17-smarter-dragging.html">smarter dragging</a></h1><p class="meta"><time datetime="2011-09-17" pubdate>Sep 17th 2011</time></p></header><article><p>It&#39;s quite recently that I got serious about javascript.
As I started to learn javascript, the first thing I thought was it&#39;s absolutely different from development based on GUI toolkit.


</p>
<p>In android development, I could create <a href="http://developer.android.com/guide/topics/ui/custom-components.html">custom View</a> overriding View class and I was given    <code>onDraw()</code> method for re-rendering.

</p>
<p>In Flex development, I can create <a href="http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7ff9.html">custom component</a> overriding UIComponent class and I was given <code>updateDisyplayList()</code> method.

</p>
<p>But when it comes to HTML and javascript development, it seems to me I was given no such stuff. So I wondered how I could manage timing of re-rendering.

</p>
<p>For example, it&#39;s not good idea to do some process with event handling, since mouseover event can be fired more than once a rendering cycle. 

</p>
<pre><code class="lang-javascript">window.onmousemove = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
  <span class="comment">// dom manipulating and some process</span>
}</code></pre>
<p>Now that javascript has <a href="https://developer.mozilla.org/en/DOM/window.mozRequestAnimationFrame">requestAnimationFrame</a> method, I was granted the way to manage  with making a flag <code>isDirty</code>

</p>
<pre><code class="lang-javascript">window.onmousemove = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
  <span class="keyword">if</span> (isDirty) {
    <span class="keyword">return</span>;
  }
  isDirty = <span class="literal">true</span>;
  requestAnimationFrame(<span class="function"><span class="keyword">function</span> <span class="params">()</span>{</span>
    <span class="comment">// update here</span>
    isDirty = <span class="literal">false</span>;
  });
}</code></pre>
<p>I&#39;m going to put here a test app for dragging and animation. It won&#39;t work with IE since IE have yet to implement CSS transitions.

</p>
<iframe src="/demo/drag-demo.html" id='iframe' scrolling="no" style="height: 400px" ></iframe>

<p>I found javascript quite cool and productive in so far as application is tiny like this.

</p>
</article><div class="post-link"><a href="/posts/2012-11-17-blog-redesign.html" class="noline pull-right">next post</a><a href="/posts/2011-09-15-css3-transform.html" class="noline">previous post</a></div></article><div class="comments"><div id="disqus_thread"></div></div><script type="text/javascript">
     /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
     var disqus_shortname = 'uithingsconsidered'; // required: replace example with your forum shortname

     /* * * DON'T EDIT BELOW THIS LINE * * */
     (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><a href="http://github.com/smagch"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="/images/forkme.png" alt="Fork me on GitHub"></a><footer id="main-footer"><span>&copy;2012 &ndash; Shimaguchi Tomoya</span></footer><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25646251-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></div></body></html>